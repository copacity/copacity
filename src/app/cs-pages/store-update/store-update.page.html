<div class="profile-popover">
  <div class="profile-header">
  </div>
  <div class="profile-header-clear" style="height: 30px;">
  </div>
  <div class="profile-body" style="margin: 0px 5px;">
    <i (click)="close()" class="fa fa-times-circle"
      style="right: 0px;position: absolute;top: 0;font-size: 2em;padding: 2px;"></i>

    <a style="background-color: white; color: black;"
      class="profile-button button shadow-large button-m button-round uppercase bolder button-center-large">Actualizar
      Tienda</a>

    <form [formGroup]="form">
      <div class="content header-clear-small" style="margin: 0px 0px 0px 0px;">
        <ion-list lines="full" class="ion-no-margin ion-no-padding" style="padding-bottom: 0px">
          <ion-item>
            <ion-label position="floating" style="color: gray;">Nombre de tu Tienda <b style="color: red;">(*)</b>
            </ion-label>
            <ion-input formControlName="name"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label style="color: gray;">Categoría: <b style="color: red;">(*)</b></ion-label>
            <ion-select formControlName="category" mode="ios" interface='action-sheet' style="padding-right: 10px;">
              <ion-select-option *ngFor="let storeCategory of storeCategories | async;" value="{{storeCategory.id}}">
                {{storeCategory.name}}</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label position="floating" style="color: gray;">Tel <b style="color: red;">(*)</b></ion-label>
            <ion-input type="number" formControlName="phone1"></ion-input>
          </ion-item>
          <!-- <ion-item>
            <ion-label position="floating" style="color: gray;">Tel 2 </ion-label>
            <ion-input type="number" formControlName="phone2"></ion-input>
          </ion-item> -->
          <ion-item>
            <ion-label position="floating" style="color: gray;">Whatsapp </ion-label>
            <ion-input type="number" formControlName="whatsapp"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating" style="color: gray;">Facebook</ion-label>
            <ion-input formControlName="facebook"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating" style="color: gray;">Instagram</ion-label>
            <ion-input formControlName="instagram"></ion-input>
          </ion-item>
          <!-- <ion-item>
            <ion-label position="floating" style="color: gray;">Valor Envío</ion-label>
            <ion-input formControlName="deliveryPrice" type="number"></ion-input>
          </ion-item> -->
          <ion-item>
            <ion-label position="floating" style="color: gray;">Valor Mínimo de Pedido</ion-label>
            <ion-input formControlName="orderMinAmount" type="number"></ion-input>
          </ion-item>
          <!-- <ion-item>
            <ion-label style="color: gray;">Sector: <b style="color: red;">(*)</b></ion-label>
            <ion-select formControlName="sector" interface='action-sheet'>
              <ion-select-option *ngFor="let sector of sectors | async" value="{{sector.id}}">
                {{sector.name}}</ion-select-option>
            </ion-select>
          </ion-item> -->
          <ion-item>
            <ion-label position="floating" style="color: gray;">Dirección</ion-label>
            <ion-input formControlName="address"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating" style="color: gray;">Video 1</ion-label>
            <ion-input formControlName="video1"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating" style="color: gray;">Video 2</ion-label>
            <ion-input formControlName="video2"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating" style="color: gray;">Video 3</ion-label>
            <ion-input formControlName="video3"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating" style="color: gray;">Escribe un mensaje <small style="color: gray;">
                ({{this.form.get('description').value.length}}/500)</small></ion-label>
            <ion-textarea formControlName="description"></ion-textarea>
          </ion-item>
        </ion-list>
      </div>

      <div class="top-30 bottom-30">

        <h4 class="bold color-highlight">Configuracion Avanzada</h4>
        <div class="container">
          <table class="table-borders-dark store-product-table top-20 bottom-20" style="border: solid 1px rgba(0,0,0,0.08);">
            <tr>
              <td colspan="2" style="text-align: left;">
                <h4 class="bold" style="color: black;margin-top: 0px;">Métodos de Envío</h4>
              </td>
              <td style="text-align: -webkit-right;padding-right: 5px;">
                <a (click)="openStoreShippingMethodsCreatePage()" class="button button-round-small button-xs button-full"
                  style="color: white;background-color: red;font-size: 10px;width: 90px;">Agregar</a>
              </td>
            </tr>
    
            <tr>
              <td *ngIf="(shippingMethods | async)?.length == 0"  colspan="3" style="text-align: center;">
                <span style="color: red;font-size: 1.3em;">No hay métodos de envío agregados</span>
              </td>
            </tr>
    
            <tr *ngFor="let shippingMethod of shippingMethods | async">
                <td style="vertical-align: top;" class="bold color-theme">{{shippingMethod.name}}
                </td>
                <td style="vertical-align: top;">
                  <div>
                    {{ shippingMethod.price | currency: 'USD': 'symbol' : '1.0-0' }}
                    <br />
                  </div>
                </td>
                <td style="width: 130px;vertical-align: top;padding-right: 5px;text-align: right;padding-right: 5px;">
                  <a (click)="shippingMethodDelete(shippingMethod)" class="icon icon-s icon-round shadow-small">
                    <i class="fa fa-trash" style="color: black"></i></a>
                  <a (click)="shippingMethodUpdate(shippingMethod)" class="icon icon-s icon-round shadow-small">
                    <i class="fa fa-edit" style="color: black"></i></a>
                </td>
              </tr>
          </table>
        </div>
      </div>

      <div *ngIf="(!form.valid && form.touched)" style="margin: 15px;"
        class="content content-box round-small shadow-large">
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('name').errors">
          <span *ngIf="form.get('name').hasError('required')">Nombre es requerido</span>
          <span *ngIf="form.get('name').hasError('maxlength')">Nombre debe ser máximo de 50 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('category').errors">
          <span *ngIf="form.get('category').hasError('required')">Categoría es requerido</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('phone1').errors">
          <span *ngIf="form.get('phone1').hasError('required')">Tel 1 es requerido</span>
          <span *ngIf="form.get('phone1').hasError('max')">Tel 1 debe ser máximo de 15 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('phone2').errors">
          <span *ngIf="form.get('phone2').hasError('max')">Tel 2 debe ser máximo de 15 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('whatsapp').errors">
          <span *ngIf="form.get('whatssapp').hasError('max')">Whatsapp debe ser máximo de 15 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('facebook').errors">
          <span *ngIf="form.get('facebook').hasError('maxlength')">Facebook debe ser máximo de 250 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('instagram').errors">
          <span *ngIf="form.get('instagram').hasError('maxlength')">Instagram debe ser máximo de 250 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('orderMinAmount').errors">
          <span *ngIf="form.get('orderMinAmount').hasError('max')">Valor mínimo de pedido debe ser máximo de 10
            caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('video1').errors">
          <span *ngIf="form.get('video1').hasError('maxlength')">Video 1 debe ser máximo de 250 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('video2').errors">
          <span *ngIf="form.get('video2').hasError('maxlength')">Video 2 debe ser máximo de 250 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('video3').errors">
          <span *ngIf="form.get('video3').hasError('maxlength')">Video 3 debe ser máximo de 250 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('address').errors">
          <span *ngIf="form.get('address').hasError('maxlength')">Dirección debe ser máximo de 250 caracteres</span>
        </p>
        <p style="color: red;font-size: 1.3em;" *ngIf="form.get('description').errors">
          <span *ngIf="form.get('description').hasError('required')">Descripción es requerido</span>
          <span *ngIf="form.get('description').hasError('maxlength')">Descripción debe ser máximo de 500
            caracteres</span>
        </p>
      </div>
    </form>

    <div>
      <a (click)="updateStore()"
        style="background-color: red;color:white;font-size: 15px;font-weight: bold;padding: 12px;height: 50px;margin: 10px 15px 10px 15px;padding-top: 15px;"
        class="button button-round-small shadow-large button-full button-s">ACTUALIZAR!</a>
    </div>
  </div>
</div>