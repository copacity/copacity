<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="close()">
        <i class="fa fa-arrow-left" style="color: black;font-size: 1.5em;"></i>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="primary">
      <!-- <ion-button routerLink="/search/{{store?.id}}">
        <i class="fa fa-search" style="color: black;"></i>
      </ion-button> -->
      <ion-button #cart (click)="openCart()" *ngIf="!isAdmin">
        <i class="fa fa-shopping-cart" style="color: black;"></i>
        <ion-badge *ngIf="(cartSevice.getCartItemCount() | async) > 0" id="badge-cart" color="danger" slot="end">
          {{ cartSevice.getCartItemCount() | async }}
        </ion-badge>
      </ion-button>
      <ion-button (click)="presentMenuNotifications($event)" class="notifications-icon">
        <i class="fa fa-bell" style="color: black"></i>
        <ion-badge *ngIf="(appService.notificationsCount | async) > 0" id="badge-notifications" color="danger"
          slot="end">{{appService.notificationsCount | async}}</ion-badge>
      </ion-button>
      <ion-button (click)="presentMenuUser($event)">
        <i class="fa fa-user" style="color: black"></i>
      </ion-button>
    </ion-buttons>

    <ion-title style="font-size: medium;">
      <a routerLink="/home" class="header-title bold"><span style="color: red;">COPA</span>CITY</a>
      <!-- <span style="padding-left: 5px;font-size: medium;">{{store?.name}}</span> -->
    </ion-title>
  </ion-toolbar>

  <!-- Left Side Menu Only To Big Browsers -->
  <div id="main-menu-large">
    <ion-header>
      <ion-toolbar>
        <div class="content top-30" *ngIf="appService?.currentUser">
          <div class="user-slider owl-carousel  bottom-0">
            <div class="user-list-left">
              <img
                [src]="this.appService.currentUser?.photoUrl?this.appService.currentUser?.photoUrl:'../../../assets/icon/no-image.png'"
                alt="img" class="shadow-small">
              <h4 style="top: -15px;">{{appService.currentUser?.name}}</h4>
              <a routerLink="/profile" class="next-slide-user" style="top: 70px;background-color: red;">VER PERFIL</a>
            </div>
          </div>
        </div>

        <ion-title *ngIf="!appService?.currentUser">
          <a (click)="SignIn()"
            style="background-color: red;color:white;font-size: 15px;font-weight: bold;padding: 12px;height: 50px;margin: 10px 15px 10px 15px;padding-top: 15px;"
            class="button button-round-small shadow-large button-full button-s">INICIAR SESION</a>
        </ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content class="side-content">
      <ion-list>
        <ion-item style="padding: 3px;" routerLink="/home">
          <i class="fa fa-home"></i>
          <ion-label style="padding-left:10px">Inicio</ion-label>
        </ion-item>
        <ion-item style="padding: 3px;" *ngIf="appService?.currentUser" routerLink="/order-list">
          <i style="padding-left: 5px;" style="padding-left: 5px;" class="fa fa-clipboard-list"></i>
          <ion-label style="padding-left:15px">Mis Pedidos</ion-label>
        </ion-item>
        <!-- <ion-item style="padding: 3px;" *ngIf="appService?.currentUser && appService?.currentUser.isAdmin"
          routerLink="/store/{{ appService._userStoreId }}">
          <i class="fa fa-store"></i>
          <ion-label style="padding-left:10px">Mi Tienda</ion-label>
        </ion-item> -->
        <ion-item style="padding: 3px;" routerLink="/contact">
          <i class="fa fa-paper-plane"></i>
          <ion-label style="padding-left:10px">Sugerencias</ion-label>
        </ion-item>
        <!-- <ion-item style="padding: 3px;">
            <i class="fa fa-info-circle"></i>
            <ion-label style="padding-left:10px">Acerca de</ion-label>
          </ion-item> -->
        <ion-item style="padding: 3px;cursor: pointer;" *ngIf="appService?.currentUser" (click)="signOut()">
          <i class="fa fa-sign-out-alt"></i>
          <ion-label style="padding-left:10px">Cerrar Sesion</ion-label>
        </ion-item>
      </ion-list>
      <ion-toolbar style="padding-top: 30px;">
        <div class="footer" style="padding: 8px 8px 8px 8px;">

          <div class="user-list-left" style="text-align: -webkit-center;padding-bottom: 15px;">
            <img src="../assets/icon/favicon.png" alt="img" class="shadow-small" style="width: 60px;">
          </div>

          <a class="nav-title color-theme" style="font-size: 20px;padding: 0px 0px 0px 0px;"><span
              style="color: red;">COPA</span>CITY</a>
          <p class="footer-text" style="margin-bottom: 10px;padding: 0px 0px 0px 0px;">Tu Centro Comercial Virtual</p>

          <div class="footer-socials" style="padding-left: 20px;">
            <a href="{{ appService._appInfo?.facebook }}" class="round-tiny shadow-medium bg-facebook"><i
                class="fab fa-facebook-f"></i></a>
            <a href="tel:{{ appService._appInfo?.phone }}" class="round-tiny shadow-medium bg-phone"><i
                class="fa fa-phone"></i></a>
            <a href="https://wa.me/57{{ appService._appInfo?.whatsapp }}" class="icon icon-round icon-s bg-whatsapp"><i
                class="fab fa-whatsapp"></i></a>
            <a (click)="shareApp($event)" data-menu="menu-share" class="round-tiny shadow-medium bg-red2-dark"><i
                class="fa fa-share-alt"></i></a>
          </div>
          <p style="margin-bottom: 10px;padding: 0px 0px 0px 0px;" class="footer-text"><b>Version</b>
            {{ appService.appVersion }}
          </p>
          <p style="margin: 0px;margin-bottom: 10px;padding: 0px 0px 0px 0px;" class="footer-copyright">Copyright
            &copy; Enabled <span id="copyright-year">2020</span>.
            All Rights Reserved.
          </p>
        </div>
      </ion-toolbar>
    </ion-content>
  </div>

  <!-- Right Side Menu Only To Big Browsers -->
  <div id="main-menu-large-right">
    <ion-header>
      <ion-toolbar>
        <ion-title style="text-align: center;">
          <h4 style="top: -15px;padding-left: 10px;font-weight: 700;">Notificaciones</h4>
        </ion-title>
      </ion-toolbar>
    </ion-header>

    <ion-content class="side-content">
      <app-menu-notifications></app-menu-notifications>
    </ion-content>
  </div>
</ion-header>


<super-tabs [config]="{ sideMenu: 'left', allowElementScroll: true }">
  <super-tabs-container>
    <super-tab>
      <ion-content class="content-background">
        <ion-refresher slot="fixed" (ionRefresh)="doRefreshMain($event)">
          <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="crescent"
            refreshingText="Actualizando Tienda...">
          </ion-refresher-content>
        </ion-refresher>

        <div class="profile-2">
          <img (click)="openImageViewer(store?.logo?store?.logo:'../../../assets/icon/no-image.png')" style="width: 150px;" class="profile-image preload-image"
            [src]="store?.logo?store?.logo:'../../../assets/icon/no-image.png'" alt="img">

          <div *ngIf="isAdmin" class="under-slider-button">
            <div class="cta-socials" style="text-align: center;">

              <a class="icon icon-s icon-round shadow-small" style="background-color: white;">

                <label for="file-upload">
                  <i style="color: black;" class="fa fa-upload"></i> </label>
                <input (change)="uploadFile($event)" id="file-upload" type="file" />
              </a>
            </div>
          </div>

        </div>

        <!-- <div class="profile-right" style="text-align: center;">
          <a>
            <img style="margin: 0;" class="img-profile-store profile-image preload-image round-medium shadow-large" [src]="store?.logo?store?.logo:'../../../assets/icon/no-image.png'">
          </a>

          <a class="color-theme" *ngIf="isAdmin" style="padding-top: 10px;">
            <label for="file-upload">
              <i class="fa fa-upload" style="color: black;padding-right: 5px;"></i> <small>Subir logo</small>
            </label>
            <input (change)="uploadFile($event)" id="file-upload" type="file" />
          </a>
        </div> -->

        <div class="profile-1 bottom-30 top-30">
          <div class="profile-body" style="border-radius:15px;margin: 0px 5px;">

            <a (click)="shareStore($event)"
              style="background-color: white; color: black; font-size: 15px;border-radius:15px;text-align: center;margin-bottom: 0px;"
              class="profile-button button shadow-large button-m button-round uppercase bolder button-center-xlarge">{{store?.name}}
            </a>

            <!-- <a (click)="openStoreInformationComponent($event)" style="text-align: end;padding-top: 10px;"
              class="color-theme">
              <i class="fa fa-info-circle" style="color: black;padding-left: 5px;padding-right: 5px;"></i> <span
                style="color: blue;">Información</span></a> -->

            <div class="top-10"></div>
            <div style="margin: 0px 15px 0px 15px;padding-top: 5px;">
              <a (click)="openStoreInformationComponent($event)" class="button button-round-small button-border button-full bottom-0"
                style="color: red;font-size: 12px;border: double;margin-bottom: 0px;">
                <i class="fa fa-info-circle" style="color: red;padding-left: 5px;padding-right: 5px;"></i> <span
                  style="color: red;">Información</span>
              </a>
              <div class="clear"></div>
            </div>

            <div *ngIf="isAdmin" style="margin: 0px 15px 0px 15px;padding-top: 5px;">
              <div class="one-half">
                <a (click)="openStoreCouponsPage()" class="button button-round-small button-border button-full bottom-0"
                  style="color: red;font-size: 12px;border: double;margin-bottom: 0px;">
                  <i class="fa fa-cut" style="font-size: 1.5em;color: red;"></i><span>&nbsp;CUPONES</span></a>
              </div>
              <div class="one-half last-column">
                <a (click)="openStoreUpdatePage()" class="button button-round-small button-full"
                  style="color: red;font-size: 12px;border: double;margin-bottom: 0px;">
                  &nbsp;&nbsp;<i class="fas fa-edit"
                    style="font-size: 1.5em;color: red;"></i><span>&nbsp;EDITAR&nbsp;&nbsp;</span>
                </a>
              </div>
              <div class="clear"></div>
            </div>

            <div style="margin: 0px 15px 0px 15px;padding-top: 5px;">
              <div class="one-half">
                <a (click)="openStorePointsPage()" class="button button-round-small button-full"
                  style="color: red;font-size: 12px;border: double;margin-bottom: 0px;">
                  &nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-gift"
                    style="font-size: 1.5em;color: red;"></i><span>&nbsp;REGALOS&nbsp;</span>
                </a>
              </div>
              <div class="one-half last-column">
                <a (click)="openStoreCouponsPage()" class="button button-round-small button-border button-full bottom-0"
                  style="color: red;font-size: 12px;border: double;margin-bottom: 0px;">
                  <i class="fa fa-users" style="font-size: 1.5em;color: red;"></i><span>&nbsp;VENDEDORES</span></a>
              </div>
              <div class="clear"></div>
            </div>

            <div class="bottom-0">
              <div *ngIf="isAdmin" style="margin: 0px 15px 0px 15px;padding-top: 5px;">
                <div class="one-half">
                  <a (click)="openProductCreatePage()" class="button button-round-small button-full"
                    style="color: white;background-color: red;font-size: 12px;margin-bottom: 0px;">+ Producto</a>
                </div>
                <div class="one-half last-column">
                  <a (click)="openProductCategoriesdPage()"
                    class="button  button-round-small button-border button-full bottom-0"
                    style="color: white;background-color: red;font-size: 12px;margin-bottom: 0px;">+ sección&nbsp;</a>
                </div>
                <div class="clear"></div>
              </div>
              <div class="clear"></div>
            </div>

            <!-- <div class="divider divider-margins bottom-0"></div> -->

            <div class="content gallery-view-controls" style="padding-top: 10px;">
              <!-- <a href="#" class="color-highlight gallery-view-1-activate"><i class="fa fa-th"></i></a>
              <a href="#" class="gallery-view-2-activate"><i class="fa fa-th-large"></i></a>
              <a href="#" class="gallery-view-3-activate"><i class="fa fa-bars"></i></a> -->

              <ion-list>
                <ion-item>
                  <ion-label>Sección:</ion-label>
                  <ion-select style="padding-right: 10px;" mode="ios" cancelText="Cancelar" value="0" okText="Okay!"
                    interface='action-sheet' (ionChange)="productCategory_OnChange($event)">
                    <ion-select-option value="0">Todas</ion-select-option>
                    <ion-select-option *ngFor="let productCategory of productCategories | async;"
                      value="{{productCategory.id}}">{{productCategory.name}}</ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-list>

              <!-- <div class="clear"></div> -->
            </div>

            <div class="content bottom-10">
              <div *ngIf="searchingProducts" style="padding-top:10px ;">
                <div class="one-half" *ngFor="let item of [1,2,3,4,5,6]">
                  <div class="blog-col-item">
                    <a>
                      <ion-skeleton-text animated style="height: 150px;" class="round-medium"></ion-skeleton-text>
                      <ion-label>
                        <h3>
                          <ion-skeleton-text animated style="width: 100%" class="round-medium"></ion-skeleton-text>
                        </h3>
                        <p>
                          <ion-skeleton-text animated style="width: 100%" class="round-medium"></ion-skeleton-text>
                        </p>
                        <p>
                          <ion-skeleton-text animated style="width: 100%" class="round-medium"></ion-skeleton-text>
                        </p>
                      </ion-label>
                    </a>
                  </div>
                </div>
              </div>

              <div class="boxed-text-huge">
                <label *ngIf="productSearchHits == 0"
                  style="color: red;padding-top: 20px;font-size: 1.2em;padding-bottom: 20px;">No se
                  encontraron productos en la sección seleccionada</label>
              </div>

              <!-- {{ !product?'hidden':'' }} -->
              <div class="one-half {{ (i %2 != 0? 'last-column':'' )}} "
                *ngFor="let product of products | async; let i = index" style="padding-bottom: 50px">
                <div class="blog-col-item" style="margin-bottom: 0px;">
                  <a>
                    <img (click)="openProduct(product)"
                      src="{{product?.image?product.image:'../../../assets/icon/no-image.png'}}"
                      class="responsive-image preload-image shadow-large round-medium img-store {{(product?.soldOut)?'sold-out':'' }}"
                      alt="img">

                    <em style="background-color: white;color: black;font-weight: bold;font-size: 1.2em;"
                      class="{{(product?.discount && product?.discount > 0)?'line-through':''}} {{(product?.soldOut)?'sold-out':'' }}">
                      {{ product?.price | currency: 'USD': 'symbol' : '1.0-0' }}</em>

                    <em *ngIf="product?.discount && product?.discount > 0" class="{{(product?.soldOut)?'sold-out':'' }}"
                      style="background-color: yellow;color: black;font-weight: bold;font-size: 1.2em;margin-top: 0px;">
                      {{ product?.price - (product?.price * (product?.discount / 100)) | currency: 'USD': 'symbol' : '1.0-0' }}</em>

                    <em *ngIf="product?.discount && product?.discount > 0" style="background-color: transparent;color: black;font-weight: bold;font-size: 1.2em;
                        top: 25px;right: 0px" class="{{(product?.soldOut)?'sold-out':'' }}">
                      <i class="fa fa-certificate" style="color: yellow;font-size: 2.8em;"></i></em>

                    <em *ngIf="product?.discount && product?.discount > 0" class="{{(product?.soldOut)?'sold-out':'' }}"
                      style="background-color: transparent;color: black;font-weight: bold;font-size: 1.2em;top: 38px;right: 5px;">
                      -{{ product?.discount }}%</em>

                    <em *ngIf="product?.soldOut"
                      style="background-color: transparent;color: black;font-weight: bold;font-size: 1.2em;top: 38px;right: 5px;"
                      class="{{(product?.discount && product?.discount > 0)?'line-through':''}}">
                      <img src="../../../assets/icon/agotado.png" class="responsive-image preload-image round-medium"
                        alt="img">
                    </em>

                    <table style="font-size: 1em;margin-bottom:0px">
                      <tr>
                        <td style="text-align: right;padding: 9px 0px 0px 0px;margin-top: 0px">
                          <a *ngIf="isAdmin" (click)="presentDeleteProductPrompt(product)"
                            class="icon icon-s icon-round shadow-small">
                            <i class="fa fa-trash" style="color: black"></i></a>
                          <a *ngIf="isAdmin" (click)="openProductUpdatePage(product)"
                            class="icon icon-s icon-round shadow-small">
                            <i class="fa fa-edit" style="color: black"></i></a>
                          <ion-list *ngIf="isAdmin">
                            <ion-item style="text-align: -webkit-right;">
                              <ion-label style="color: gray;font-size: medium;">Activo</ion-label>
                              <ion-toggle (ionChange)="productSoldOut($event, product)" mode="ios" slot="start"
                                name="blueberry" checked="{{(product?.soldOut)?'false':'true' }}"></ion-toggle>
                            </ion-item>
                          </ion-list>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <strong style="height: 35px;padding-top: 10px;"
                            class="strong-store {{(product?.soldOut)?'sold-out':'' }}">
                            {{((product?.name.length<=30)?product?.name:product?.name.substring(0, 30) + '...')}}</strong>
                        </td>
                      </tr>
                      <tr *ngIf="!isAdmin">
                        <td>
                          <a (click)="addToCart($event, product)" style="background-color: red;color:white;"
                            class="button button-round-small shadow-large button-full button-s {{(product?.soldOut)?'sold-out':'' }}">
                            <i class="fa fa-shopping-cart add-button"
                              style="color: white;padding-right: 5px;"></i>AGREGAR</a>
                        </td>
                      </tr>
                    </table>
                  </a>
                </div>
              </div>


              <div class="clear"></div>
            </div>
          </div>
          <div class="clear"></div>
        </div>
      </ion-content>
    </super-tab>
  </super-tabs-container>
</super-tabs>

<!-- <ion-tabs style="z-index: 1;">
  <ion-tab-bar slot="bottom" style="padding-top: 5px;background-color: red;">
    <ion-tab-button (click)="alert('test')" style="background-color: red;">
      <i class="fa fa-ticket-alt" style="font-size: 1.5em;color: white;"></i>
      <ion-label style="color: white;">Cupones</ion-label>  
    </ion-tab-button>

    <ion-tab-button tab="home" style="background-color: red;">
      <i class="fa fa-home" style="font-size: 2em;color: white;"></i>
      <ion-label style="color: white;">Inicio</ion-label>
    </ion-tab-button>

    <ion-tab-button tab="points" style="background-color: red;">
      <i class="fas fa-gift" style="font-size: 1.5em;color: white;"></i>
      <ion-label style="color: white;">Puntos</ion-label>
    </ion-tab-button>
  </ion-tab-bar>
</ion-tabs> -->